# 🚀 重启服务指南

## ✅ 所有修复已完成

### 已修复的问题
1. **后端启动失败** - 移除了 AiModule 中重复的 ConfigModule 和 ThrottlerModule
2. **局域网访问失败** - 服务器监听地址改为 0.0.0.0
3. **前端硬编码 URL** - 所有 API 服务改用环境变量

## 📋 立即执行步骤

### 1️⃣ 停止现有服务
在后端和前端终端按 `Ctrl+C` 停止服务

### 2️⃣ 重启后端
```bash
cd nest
pnpm run start:dev
```

**等待看到**:
```
✅ NestJS 应用已就绪，HTTP/2.0 支持已启用
🌐 服务器运行在: https://0.0.0.0:7002
```

### 3️⃣ 验证后端
新开终端执行:
```bash
lsof -i :7002
```
应该看到 node 进程在监听 7002 端口

### 4️⃣ 重启前端
```bash
cd nest-react
pnpm run start
```

## ✅ 测试清单

### 测试 IM 聊天
1. 访问 http://localhost:3000
2. 登录系统
3. 点击 "即时通讯"
4. ✅ 应该看到联系人列表
5. ✅ 可以发送和接收消息

### 测试 AI 助手
1. 点击 "AI 助手"
2. 输入消息并发送
3. ✅ 应该看到连接成功
4. ✅ 应该看到流式响应

## 🔧 如果还有问题

### AI 助手返回 403
Groq API Key 可能失效，需要重新生成:
1. 访问 https://console.groq.com
2. 生成新的 API Key
3. 更新 `nest/.env` 中的 `GROQ_API_KEY`
4. 重启后端

### 查看详细日志
- 后端: 查看终端输出
- 前端: 打开浏览器开发者工具 (F12) → Console 和 Network 标签

---
**状态**: ✅ 代码修复完成，等待服务重启验证
